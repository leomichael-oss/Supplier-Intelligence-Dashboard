<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Supplier Intelligence Dashboard - Aurora Variant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Sora:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orb bg-orb-a"></div>
    <div class="bg-orb bg-orb-b"></div>
    <button id="theme-toggle" class="theme-toggle" type="button" aria-pressed="false">Light Mode</button>

    <main class="app-shell">
      <section id="dashboard-view" class="view active">
        <header class="hero">
          <h1>Supplier Intelligence Dashboard</h1>
          <p class="subtitle">
            Snapshot view of strategic suppliers with sortable performance and cost dynamics.
          </p>
        </header>

        <section id="dashboard-ai-bar" class="profile-ai-bar panel">
          <div class="profile-ai-header">
            <h3>Ask AI</h3>
            <p>Ask portfolio-level sourcing and negotiation questions across all suppliers.</p>
          </div>
          <form id="dashboard-ai-form" class="profile-ai-form">
            <input id="dashboard-ai-input" class="profile-ai-input" type="text" placeholder="e.g., Which suppliers show the highest near-term margin risk?" aria-label="Ask AI on dashboard" required />
            <button id="dashboard-ai-submit" class="ghost-btn" type="submit">Ask AI</button>
          </form>
          <div id="dashboard-ai-answer" class="profile-ai-answer muted-text">Ask a question to get cross-supplier strategic guidance.</div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Suppliers</h2>
            <div class="dashboard-controls">
              <p>Click a supplier to open the full profile.</p>
              <input id="dashboard-search" class="dashboard-search" type="search" placeholder="Search suppliers..." aria-label="Search suppliers" />
              <div class="profile-toggle" role="tablist" aria-label="Dashboard mode toggle">
                <button id="dash-toggle-summary" class="toggle-btn active" type="button">Summary</button>
                <button id="dash-toggle-detail" class="toggle-btn" type="button">Detail</button>
                <button id="dash-toggle-negotiations" class="toggle-btn" type="button">Negotiations</button>
                <button id="dash-toggle-news" class="toggle-btn" type="button">News</button>
              </div>
            </div>
          </div>

          <div id="dashboard-summary-view" class="table-wrap">
            <table id="supplier-table">
              <thead>
                <tr>
                  <th data-key="name">Supplier</th>
                  <th data-key="sales">Sales $</th>
                  <th data-key="salesYoy">Sales Change YoY %</th>
                  <th data-key="margin">Margin $</th>
                  <th data-key="marginYoy">Margin Change YoY %</th>
                  <th data-key="inflight">Cost Change Proposals Inflight $</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
          <div id="dashboard-detail-view" class="dashboard-detail-view"></div>
        </section>
      </section>

      <section id="profile-view" class="view">
        <div class="profile-topbar">
          <button id="back-btn" class="ghost-btn">Back to Dashboard</button>
          <div class="profile-company">
            <div id="profile-name" class="profile-name"></div>
          </div>
          <div class="profile-toggle" role="tablist" aria-label="Profile section toggle">
            <button id="toggle-internal" class="toggle-btn active" data-target="internal" type="button">Internal</button>
            <button id="toggle-external" class="toggle-btn" data-target="external" type="button">External</button>
            <button id="toggle-negotiation" class="toggle-btn" data-target="negotiation" type="button">Negotiation Assistant</button>
          </div>
        </div>

        <section id="profile-quick-ai-bar" class="profile-ai-bar panel">
          <div class="profile-ai-header">
            <h3>Ask AI</h3>
            <p>Ask a supplier-specific question from Internal or External view.</p>
          </div>
          <form id="quick-ai-form" class="profile-ai-form">
            <input
              id="quick-ai-input"
              class="profile-ai-input"
              type="text"
              placeholder="e.g., What is our strongest counter-position right now?"
              aria-label="Quick AI ask"
              required
            />
            <button id="quick-ai-submit" class="ghost-btn" type="submit">Ask AI</button>
          </form>
          <div id="quick-ai-answer" class="profile-ai-answer muted-text">
            Ask a question for a fast supplier-specific answer.
          </div>
        </section>

        <section class="profile-grid">
          <article id="internal-panel" class="panel profile-panel profile-page active">
            <div class="content-block summary-block">
              <h3>Internal Performance Summary</h3>
              <ul id="internal-summary" class="clean-list"></ul>
            </div>

            <div id="internal-top-metrics" class="op-metrics-grid"></div>

            <div class="table-block">
              <h3>Cost Change Proposals Inflight</h3>
              <table id="inflight-table">
                <thead>
                  <tr>
                    <th>Effective Date</th>
                    <th>Top Impacted Category</th>
                    <th>Sourcing Lead</th>
                    <th>$ Proposed</th>
                    <th>Justified $</th>
                    <th>Proposed %</th>
                    <th>Justified %</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <div class="table-block">
              <h3>Cost Change History</h3>
              <table id="history-table">
                <thead>
                  <tr>
                    <th>Effective Date</th>
                    <th>$ Proposed</th>
                    <th>Justified $</th>
                    <th>Accepted $</th>
                    <th>Proposed %</th>
                    <th>Justified %</th>
                    <th>Accepted %</th>
                    <th>Justified Acceptance Rate</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
            <div class="content-block">
              <h3>Negotiation Approach</h3>
              <ul id="negotiation-approach" class="clean-list"></ul>
            </div>

            <div class="content-block portfolio-head">
              <h3>Product Portfolio</h3>
            </div>

            <div class="split-card portfolio-tile-card">
              <div class="profile-main profile-block">
                <h4>Top 5 Brands</h4>
                <div id="top-brands-coverage" class="top-brands-coverage"></div>
                <div class="table-wrap compact-table-wrap">
                  <table id="top-brands-table">
                    <thead>
                      <tr>
                        <th>Brand</th>
                        <th>% of Portfolio</th>
                        <th>Sales $</th>
                        <th>Sales % Change YoY</th>
                        <th>Top SKU</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>

            <div class="split-card portfolio-tile-card">
              <div class="category-chart-wrap">
                <h4>Category Breakout</h4>
                <div class="category-chart-row">
                  <div class="table-wrap compact-table-wrap">
                    <table id="category-table">
                      <thead>
                        <tr>
                          <th>Category</th>
                          <th>Supplier Sales $</th>
                          <th>% of Supplier Sales</th>
                          <th>Category Sales $</th>
                          <th>% of Category Sales</th>
                        </tr>
                      </thead>
                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="split-card portfolio-tile-card">
              <div class="profile-main profile-block">
                <h4>Commodity Exposure</h4>
                <div class="table-wrap compact-table-wrap">
                  <table id="commodity-table">
                    <thead>
                      <tr>
                        <th>Commodity</th>
                        <th>Est. Portion of Portfolio</th>
                        <th>YoY % Change</th>
                        <th>QoQ % Change</th>
                        <th>Commodity Change Est. YoY $ Impact</th>
                        <th>Commodity Change Est. QoQ $ Impact</th>
                      </tr>
                    </thead>
                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>

          </article>

          <article id="external-panel" class="panel profile-panel profile-page">
            <div class="content-block summary-block">
              <h3>External Performance Summary</h3>
              <ul id="external-summary" class="clean-list"></ul>
            </div>

            <div class="op-metrics-grid" id="external-top-metrics"></div>

            <div class="content-block">
              <h3>Highlights from Recent Financial Report</h3>
              <ul id="financial-highlights" class="clean-list"></ul>
            </div>
            <div class="content-block">
              <h3>Risks</h3>
              <ul id="external-risks" class="clean-list"></ul>
            </div>
            <div class="content-block">
              <h3>Opportunities</h3>
              <ul id="external-opportunities" class="clean-list"></ul>
            </div>

            <div class="content-block">
              <h3>ESG</h3>
              <p id="esg-summary" class="section-intro"></p>
              <ul id="esg-list" class="clean-list news-list"></ul>
            </div>

            <div class="content-block">
              <h3>News Mentions</h3>
              <ul id="news-list" class="clean-list news-list"></ul>
            </div>

            <div class="content-block source-block">
              <h3>External Data Sources</h3>
              <ul id="source-list" class="clean-list source-list"></ul>
            </div>
          </article>

          <article id="negotiation-panel" class="panel profile-panel profile-page">
            <div id="negotiation-list-view" class="negotiation-subview active">
              <div class="content-block summary-block">
                <h3>Negotiation Assistant</h3>
                <p class="section-intro">
                  Open and manage supplier-specific negotiations. Enter a negotiation to run AI strategy, upload documents, and capture advisory output.
                </p>
                <button id="open-new-negotiation-btn" class="ghost-btn" type="button">Open New Negotiation</button>
              </div>

              <div id="negotiation-create-block" class="content-block negotiation-create-block hidden">
                <label class="profile-ai-label" for="negotiation-name-input">Negotiation Name</label>
                <div class="negotiation-create-row">
                  <input
                    id="negotiation-name-input"
                    class="profile-ai-input"
                    type="text"
                    placeholder="e.g., Q2 Cost Increase â€“ Confectionery"
                  />
                  <button id="create-negotiation-btn" class="ghost-btn" type="button">Create</button>
                </div>
              </div>

              <div class="content-block">
                <h3>Open Negotiations</h3>
                <div id="negotiation-list" class="negotiation-list"></div>
              </div>
            </div>

            <div id="negotiation-workspace-view" class="negotiation-subview">
              <div class="content-block summary-block">
                <div class="negotiation-workspace-head">
                  <button id="back-to-negotiations-btn" class="ghost-btn" type="button">Back to Open Negotiations</button>
                  <h3 id="current-negotiation-title">Negotiation Workspace</h3>
                </div>
                <p class="section-intro">Use this workspace to prepare strategy and response positions for this negotiation.</p>
              </div>

              <div class="content-block">
                <form id="supplier-ai-form" class="profile-ai-form profile-ai-form-stacked">
                  <label class="profile-ai-label" for="supplier-ai-input">Your Question</label>
                  <textarea
                    id="supplier-ai-input"
                    class="profile-ai-input profile-ai-textarea"
                    placeholder="What is the best strategy to respond to the latest proposed increase while protecting margin and service continuity?"
                    aria-label="Ask AI about this supplier negotiation"
                    required
                  ></textarea>

                  <div class="profile-ai-upload-grid">
                    <div>
                      <label class="profile-ai-label" for="commodity-review-file">Upload Commodity Review</label>
                      <input id="commodity-review-file" class="profile-ai-file" type="file" accept=".txt,.md,.csv,.json,.pdf,.doc,.docx" />
                      <p id="commodity-review-status" class="muted-text profile-ai-file-status">No file uploaded.</p>
                    </div>
                    <div>
                      <label class="profile-ai-label" for="supplier-communication-file">Upload Supplier Communication</label>
                      <input id="supplier-communication-file" class="profile-ai-file" type="file" accept=".txt,.md,.csv,.json,.pdf,.doc,.docx" />
                      <p id="supplier-communication-status" class="muted-text profile-ai-file-status">No file uploaded.</p>
                    </div>
                  </div>

                  <button id="supplier-ai-submit" class="ghost-btn" type="submit">Generate Strategic Advice</button>
                </form>
              </div>

              <div class="content-block">
                <h3>AI Strategic Advice</h3>
                <div id="supplier-ai-answer" class="profile-ai-answer muted-text">
                  Ask a negotiation question to generate supplier-specific strategic guidance.
                </div>
              </div>
            </div>
          </article>
        </section>
      </section>
    </main>

    <div id="metric-modal-overlay" class="metric-modal-overlay hidden" aria-hidden="true">
      <div id="metric-modal" class="metric-modal" role="dialog" aria-modal="true" aria-labelledby="metric-modal-title">
        <div class="metric-modal-head">
          <h3 id="metric-modal-title">Metric Trend</h3>
          <button id="metric-modal-close" class="ghost-btn" type="button">Close</button>
        </div>
        <div class="metric-modal-subhead">
          <p id="metric-modal-subtitle" class="muted-text"></p>
          <div class="profile-toggle metric-timeframe-toggle" role="tablist" aria-label="Metric timeframe">
            <button id="metric-tf-1y" class="toggle-btn active" type="button">Last Year</button>
            <button id="metric-tf-5y" class="toggle-btn" type="button">Last 5 Years</button>
          </div>
        </div>
        <div id="metric-chart-wrap" class="metric-chart-wrap"></div>
      </div>
    </div>

    <div id="cost-row-modal-overlay" class="metric-modal-overlay hidden" aria-hidden="true">
      <div id="cost-row-modal" class="metric-modal cost-row-modal" role="dialog" aria-modal="true" aria-labelledby="cost-row-modal-title">
        <div class="metric-modal-head">
          <h3 id="cost-row-modal-title">Cost Change Detail</h3>
          <button id="cost-row-modal-close" class="ghost-btn" type="button">Close</button>
        </div>
        <div class="metric-modal-subhead">
          <p id="cost-row-modal-subtitle" class="muted-text"></p>
        </div>
        <div class="table-wrap compact-table-wrap">
          <table id="cost-row-detail-table">
            <thead>
              <tr>
                <th>Category</th>
                <th>Product Line</th>
                <th>Rationale</th>
                <th>Proposed $</th>
                <th>Justified $</th>
                <th>Accepted $</th>
                <th>Proposed %</th>
                <th>Justified %</th>
                <th>Accepted %</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <div id="category-modal-overlay" class="metric-modal-overlay hidden" aria-hidden="true">
      <div id="category-modal" class="metric-modal cost-row-modal" role="dialog" aria-modal="true" aria-labelledby="category-modal-title">
        <div class="metric-modal-head">
          <h3 id="category-modal-title">Category Supplier Ranking</h3>
          <button id="category-modal-close" class="ghost-btn" type="button">Close</button>
        </div>
        <div class="metric-modal-subhead">
          <p id="category-modal-subtitle" class="muted-text"></p>
        </div>
        <div class="table-wrap compact-table-wrap">
          <table id="category-breakout-detail-table">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Supplier Name</th>
                <th>Top Brand</th>
                <th>Sales Penetration %</th>
                <th>COGS $</th>
                <th>Sales $</th>
                <th>YOY % Sales Change</th>
                <th>Margin $</th>
                <th>YOY % Margin Change</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
